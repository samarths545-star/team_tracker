<!DOCTYPE html>
<html>
<head>
<title>Dashboard</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-light">

<div class="container mt-5">
<h2 class="text-center">Master Performance Dashboard</h2>

<!-- PERIOD FILTER -->
<div class="text-center mb-3">
<a href="/dashboard?period=7" class="btn btn-outline-primary">7 Days</a>
<a href="/dashboard?period=30" class="btn btn-outline-primary">30 Days</a>
<a href="/dashboard?period=90" class="btn btn-outline-primary">90 Days</a>
<a href="/dashboard?period=120" class="btn btn-outline-primary">120 Days</a>
<a href="/dashboard" class="btn btn-dark">All Time</a>
</div>

<!-- SPECIFIC DATE -->
<div class="text-center mb-3">
<form method="GET" action="/dashboard">
<input type="date" name="date" required>
<button class="btn btn-success">View Specific Date</button>
</form>
</div>

<!-- DATE RANGE -->
<div class="text-center mb-4">
<form method="GET" action="/dashboard">
<input type="date" name="start_date" required>
<input type="date" name="end_date" required>
<button class="btn btn-warning">View Date Range</button>
</form>
</div>

<table class="table table-striped">
<thead class="table-dark">
<tr>
<th>Rank</th>
<th>Employee</th>
<th>Calls</th>
<th>Call Minutes</th>
<th>Faxes</th>
<th>Fax Minutes</th>
<th>Score</th>
</tr>
</thead>
<tbody>
{% for row in tables %}
<tr>
<td>{{ loop.index }}</td>
<td>{{ row.employee }}</td>
<td>{{ row.total_calls }}</td>
<td>{{ row.total_minutes | round(2) }}</td>
<td>{{ row.total_faxes }}</td>
<td>{{ row.fax_minutes }}</td>
<td>{{ row.score }}</td>
</tr>
{% endfor %}
</tbody>
</table>

<canvas id="chart"></canvas>

<script>
const labels = {{ labels | safe }};
const scores = {{ scores | safe }};

new Chart(document.getElementById('chart'), {
    type: 'bar',
    data: {
        labels: labels,
        datasets: [{
            label: 'Performance Score',
            data: scores
        }]
    }
});
</script>

<a href="/logout" class="btn btn-danger mt-3">Logout</a>
</div>

</body>
</html>
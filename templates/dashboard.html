<!DOCTYPE html>
<html>
<head>
<title>Dashboard</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

<div class="d-flex">

<!-- SIDEBAR -->
<div class="bg-dark text-white p-3" style="width:250px; min-height:100vh;">
<h4>Employee Panel</h4>
<hr>
<a href="/dashboard" class="btn btn-outline-light w-100 mb-2">Performance</a>
<a href="/upload" class="btn btn-outline-light w-100 mb-2">Upload Data</a>
<a href="/summons" class="btn btn-outline-light w-100 mb-2">Summons</a>
<a href="/logout" class="btn btn-danger w-100 mt-3">Logout</a>
</div>

<!-- MAIN -->
<div class="container mt-4">

<h2>Performance Ranking</h2>

<table class="table table-bordered text-center">
<tr class="table-dark">
<th>Rank</th>
<th>Employee</th>
<th>Final Score</th>
<th>Summons Rate (%)</th>
</tr>

{% for row in tables %}
<tr>
<td>{{ row.Rank }}</td>
<td>{{ row.Employee }}</td>
<td>{{ row.Final_Score }}</td>
<td>{{ row.Summons_Rate }}</td>
</tr>
{% endfor %}
</table>

<canvas id="chart"></canvas>

<script>
const data = {{ chart_data|safe }};
const labels = data.map(e => e.Employee);
const scores = data.map(e => e.Final_Score);

new Chart(document.getElementById('chart'), {
type: 'bar',
data: {
labels: labels,
datasets: [{ label: 'Score', data: scores }]
},
options: { scales: { y: { beginAtZero: true, max: 110 } } }
});
</script>

</div>
</div>

</body>
</html>